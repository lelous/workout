<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Workout Quest">
    <title>‚öîÔ∏è Workout Quest ‚öîÔ∏è</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-primary: #1a1d2e;
            --bg-secondary: #16213e;
            --bg-accent: #0f3460;
            --text-primary: #e8e8e8;
            --text-secondary: #94a9c9;
            --text-tertiary: #5a7ba8;
            --border-color: #e94560;
            --primary: #e94560;
            --primary-dark: #c7315a;
            --gold: #ffd700;
            --success: #00ff88;
            --success-dark: #00cc6a;
            --danger: #ff4757;
            --danger-bg: #4a1520;
            --shadow: rgba(233, 69, 96, 0.3);
            --glow: 0 0 20px rgba(233, 69, 96, 0.6);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Orbitron', sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
            background-attachment: fixed;
            padding-bottom: 100px;
            color: var(--text-primary);
            overflow-x: hidden;
        }

        /* RPG Grid Background */
        body::before {
            content: '';
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-image: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(233, 69, 96, 0.03) 2px, rgba(233, 69, 96, 0.03) 4px);
            pointer-events: none;
            z-index: 1;
        }

        .header {
            background: linear-gradient(135deg, #e94560 0%, #c7315a 100%);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 20px var(--shadow);
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 4px solid var(--gold);
        }

        .header h1 {
            font-family: 'Press Start 2P', cursive;
            font-size: 14px;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.5);
        }

        .container {
            padding: 15px;
            max-width: 600px;
            margin: 0 auto;
            position: relative;
            z-index: 2;
        }

        .card {
            background: var(--bg-secondary);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5), inset 0 0 0 2px var(--border-color);
            position: relative;
        }

        /* iOS INPUT FIXES */
        input[type="number"], input[type="text"], textarea {
            font-size: 16px !important; /* Prevents iOS Zoom */
            background: var(--bg-primary);
            color: white;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            font-family: 'Orbitron', sans-serif;
            -webkit-appearance: none;
            appearance: none;
        }

        .set-row {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 10px;
            background: var(--bg-accent);
            padding: 8px;
            border-radius: 8px;
        }

        .set-input {
            width: 75px;
            text-align: center;
            font-weight: bold;
        }

        .set-label {
            width: 50px;
            font-size: 10px;
            color: var(--gold);
            font-family: 'Press Start 2P';
        }

        /* BOSS BAR */
        .boss-container {
            position: sticky;
            top: 75px;
            z-index: 50;
            background: var(--bg-secondary);
            border: 2px solid var(--gold);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .hp-bar-bg {
            width: 100%;
            height: 15px;
            background: #000;
            border: 1px solid #fff;
            margin-top: 5px;
        }

        .hp-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff0000, #ff4757);
            transition: width 0.4s ease-out;
            box-shadow: 0 0 10px #ff0000;
        }

        /* SHAKE ANIMATION */
        @keyframes shake {
            0% { transform: translate(1px, 1px); }
            25% { transform: translate(-1px, -1px); }
            50% { transform: translate(-1px, 1px); }
            75% { transform: translate(1px, -1px); }
            100% { transform: translate(0, 0); }
        }
        .hit-shake { animation: shake 0.2s; }

        .btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-family: 'Orbitron', sans-serif;
            font-weight: bold;
            text-transform: uppercase;
            cursor: pointer;
            margin-top: 10px;
        }

        .btn-success { background: linear-gradient(135deg, var(--success) 0%, var(--success-dark) 100%); color: #000; }
        .btn-primary { background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%); color: #fff; }

        .nav {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            background: var(--bg-secondary);
            display: flex;
            justify-content: space-around;
            padding: 10px;
            border-top: 2px solid var(--primary);
            z-index: 1000;
        }

        .nav-btn { background: none; border: none; color: var(--text-secondary); font-size: 20px; text-align: center; }
        .nav-btn.active { color: var(--gold); }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const WORKOUTS = {
            monday: { name: "Upper Push", focus: "Chest/Shoulders", exercises: [{ name: "Bench Press", sets: 3, reps: "8-10", rest: 90, description: "Keep elbows at 45 degrees." }, { name: "Overhead Press", sets: 3, reps: "8-10", rest: 90, description: "Core tight, full lockout." }] },
            tuesday: { name: "Lower Body", focus: "Quads/Hams", exercises: [{ name: "Squats", sets: 4, reps: "6-8", rest: 120, description: "Chest up, drive through heels." }] },
            thursday: { name: "Upper Pull", focus: "Back/Biceps", exercises: [{ name: "Pull Ups", sets: 3, reps: "MAX", rest: 90, description: "Chin over bar." }] },
            friday: { name: "Lower Body 2", focus: "Glutes/Legs", exercises: [{ name: "Deadlifts", sets: 3, reps: "5", rest: 180, description: "Flat back, pull slack out of bar." }] }
        };

        function App() {
            const [view, setView] = useState('home');
            const [selectedDay, setSelectedDay] = useState(null);
            const [workoutLog, setWorkoutLog] = useState({});
            
            return (
                <div>
                    <div className="header">
                        <h1>{view === 'workout' ? '‚öîÔ∏è ACTIVE QUEST ‚öîÔ∏è' : '‚öîÔ∏è WORKOUT QUEST ‚öîÔ∏è'}</h1>
                    </div>
                    
                    <div className="container">
                        {view === 'home' && <Home setView={setView} />}
                        {view === 'workout' && <Workout selectedDay={selectedDay} setSelectedDay={setSelectedDay} setView={setView} workoutLog={workoutLog} setWorkoutLog={setWorkoutLog} />}
                    </div>

                    <div className="nav">
                        <button className={`nav-btn ${view === 'home' ? 'active' : ''}`} onClick={() => setView('home')}>üè†</button>
                        <button className={`nav-btn ${view === 'workout' ? 'active' : ''}`} onClick={() => setView('workout')}>‚öîÔ∏è</button>
                    </div>
                </div>
            );
        }

        function Home({ setView }) {
            return (
                <div>
                    <div className="card">
                        <h2 style={{color: 'var(--gold)', fontSize: '14px', marginBottom: '10px'}}>WELCOME, WARRIOR</h2>
                        <p style={{fontSize: '12px', color: 'var(--text-secondary)'}}>Your journey to the Iron Throne begins here.</p>
                    </div>
                    <button className="btn btn-primary" onClick={() => setView('workout')}>Begin New Battle</button>
                </div>
            );
        }

        function Workout({ selectedDay, setSelectedDay, setView, workoutLog, setWorkoutLog }) {
            const [sets, setSets] = useState([]);
            const [isHitting, setIsHitting] = useState(false);

            useEffect(() => {
                if (selectedDay) {
                    const workout = WORKOUTS[selectedDay];
                    setSets(workout.exercises.map(ex => ({
                        name: ex.name,
                        logs: Array(ex.sets).fill().map(() => ({ reps: '', weight: '' }))
                    })));
                }
            }, [selectedDay]);

            const triggerHaptic = () => {
                if (navigator.vibrate) navigator.vibrate(40);
                setIsHitting(true);
                setTimeout(() => setIsHitting(false), 200);
            };

            if (!selectedDay) {
                return (
                    <div>
                        <h3 style={{textAlign: 'center', marginBottom: '15px'}}>CHOOSE YOUR PATH</h3>
                        {Object.keys(WORKOUTS).map(day => (
                            <div key={day} className="card" onClick={() => setSelectedDay(day)} style={{cursor: 'pointer', borderLeft: '5px solid var(--gold)'}}>
                                <strong style={{textTransform: 'uppercase'}}>{day}</strong> - {WORKOUTS[day].name}
                            </div>
                        ))}
                    </div>
                );
            }

            const totalSets = sets.reduce((s, ex) => s + ex.logs.length, 0);
            const doneSets = sets.reduce((s, ex) => s + ex.logs.filter(l => l.reps !== '' && l.weight !== '').length, 0);
            const hp = totalSets > 0 ? Math.max(0, 100 - (doneSets / totalSets * 100)) : 100;

            return (
                <div className={isHitting ? 'hit-shake' : ''}>
                    <div className="boss-container">
                        <div style={{display: 'flex', justifyContent: 'space-between', fontSize: '10px', fontFamily: '"Press Start 2P"'}}>
                            <span>BOSS HP</span>
                            <span>{Math.ceil(hp)}%</span>
                        </div>
                        <div className="hp-bar-bg"><div className="hp-bar-fill" style={{width: `${hp}%`}}></div></div>
                    </div>

                    {sets.map((ex, exIdx) => (
                        <div key={exIdx} className="card">
                            <h3 style={{fontSize: '14px', color: 'var(--gold)', marginBottom: '10px'}}>{ex.name}</h3>
                            {ex.logs.map((set, setIdx) => (
                                <div key={setIdx} className="set-row">
                                    <span className="set-label">SET {setIdx+1}</span>
                                    <input 
                                        type="number" 
                                        placeholder="Reps" 
                                        className="set-input" 
                                        value={set.reps} 
                                        onDoubleClick={() => {
                                            const n = [...sets]; n[exIdx].logs[setIdx].reps = ''; setSets(n);
                                        }}
                                        onChange={(e) => {
                                            const n = [...sets]; n[exIdx].logs[setIdx].reps = e.target.value; setSets(n);
                                            triggerHaptic();
                                        }} 
                                    />
                                    <input 
                                        type="number" 
                                        placeholder="Lbs" 
                                        className="set-input" 
                                        value={set.weight} 
                                        onDoubleClick={() => {
                                            const n = [...sets]; n[exIdx].logs[setIdx].weight = ''; setSets(n);
                                        }}
                                        onChange={(e) => {
                                            const n = [...sets]; n[exIdx].logs[setIdx].weight = e.target.value; setSets(n);
                                            triggerHaptic();
                                        }} 
                                    />
                                </div>
                            ))}
                        </div>
                    ))}

                    <button className="btn btn-success" onClick={() => {
                        alert("‚öîÔ∏è VICTORY! +1000 XP Gained ‚öîÔ∏è");
                        setSelectedDay(null);
                        setView('home');
                    }}>Claim Victory</button>
                    <button className="btn" style={{background: 'var(--bg-accent)', color: 'white'}} onClick={() => setSelectedDay(null)}>Retreat</button>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
